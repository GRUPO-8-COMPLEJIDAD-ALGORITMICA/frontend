{% extends "base.html" %} {% block title %}Mapa Principal - Visualización de
Rutas{% endblock %} {% block content %}
<div class="header">
  <h1>Visualización de Rutas</h1>
  <p>Mapa con todos los nodos de respuesta y riesgo</p>
</div>

<div class="nav-links">
  <a href="/">Inicio</a>
  <a href="/mapa-controles">Controles</a>
  <a href="/busqueda-riesgo">Búsqueda de Riesgo</a>
</div>

<div class="mapa-container">
  <h2 class="mapa-title">
    Visualización de mapas interactivos con nodos y rutas
  </h2>

  <!-- Selector de mapas -->
  <div class="mapa-selector">
    <button class="btn-tab active" data-mapa="riesgo">Mapa de Riesgo</button>
    <button class="btn-tab" data-mapa="respuesta">Mapa de Respuesta</button>
    <button class="btn-tab" data-mapa="caminos">Mapa de Caminos</button>
  </div>

  <!-- Contenedor del mapa -->
  <div class="mapa-area" id="mapa-principal">
    <iframe
      id="mapa-iframe"
      src="/mapa/riesgo"
      width="100%"
      height="100%"
      frameborder="0"
      style="border-radius: 10px"
    >
    </iframe>
  </div>

  <button id="btn-calcular-rutas" class="btn btn-center">Calcular Rutas</button>
</div>

<div
  style="
    background: rgba(255, 255, 255, 0.9);
    padding: 20px;
    border-radius: 10px;
    margin-top: 20px;
  "
>
  <h3 style="color: #2c3e50; margin-bottom: 15px">Información del Sistema</h3>
  <div
    style="
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
    "
  >
    <div
      style="
        padding: 15px;
        background: #e8f6f3;
        border-radius: 8px;
        border-left: 4px solid #27ae60;
      "
    >
      <strong style="color: #27ae60">Nodos de Respuesta</strong>
      <p style="margin: 5px 0; color: #2c3e50">
        Puntos estratégicos de emergencia
      </p>
    </div>
    <div
      style="
        padding: 15px;
        background: #fdeaea;
        border-radius: 8px;
        border-left: 4px solid #e74c3c;
      "
    >
      <strong style="color: #e74c3c">Nodos de Riesgo</strong>
      <p style="margin: 5px 0; color: #2c3e50">Zonas que requieren atención</p>
    </div>
    <div
      style="
        padding: 15px;
        background: #eaf2fd;
        border-radius: 8px;
        border-left: 4px solid #3498db;
      "
    >
      <strong style="color: #3498db">Nodos Normales</strong>
      <p style="margin: 5px 0; color: #2c3e50">Puntos de tránsito regular</p>
    </div>
    <div
      style="
        padding: 15px;
        background: #fef9e7;
        border-radius: 8px;
        border-left: 4px solid #f39c12;
      "
    >
      <strong style="color: #f39c12">Rutas Calculadas</strong>
      <p style="margin: 5px 0; color: #2c3e50">Caminos optimizados</p>
    </div>
  </div>
</div>

<div
  style="
    text-align: center;
    margin-top: 30px;
    padding: 20px;
    background: rgba(255, 255, 255, 0.9);
    border-radius: 10px;
  "
>
  <h4 style="color: #2c3e50; margin-bottom: 15px">Desarrollado por Grupo 8</h4>
  <div style="color: #7f8c8d; line-height: 1.6">
    <p><strong>Bonifacio Jaramillo, Samuel Jesus</strong> (Frontend)</p>
    <p><strong>Ruiz Madrid, Billy Jake</strong></p>
    <p><strong>David Alexander Perez Garcia</strong></p>
  </div>
  <p style="margin-top: 15px; font-size: 0.9rem; color: #95a5a6">
    Tecnologías: Flask, CSS3 y JavaScript
  </p>
</div>
{% endblock %} {% block scripts %}
<script>
  document.addEventListener("DOMContentLoaded", function () {
    console.log("Mapa principal cargado");

    // Configurar tabs de mapas
    const tabButtons = document.querySelectorAll(".btn-tab");
    const mapaIframe = document.getElementById("mapa-iframe");

    tabButtons.forEach((button) => {
      button.addEventListener("click", function () {
        // Remover clase active de todos los botones
        tabButtons.forEach((btn) => btn.classList.remove("active"));

        // Agregar clase active al botón clickeado
        this.classList.add("active");

        // Cambiar el src del iframe
        const tipoMapa = this.getAttribute("data-mapa");
        mapaIframe.src = `/mapa/${tipoMapa}`;

        console.log(`Cambiando a mapa: ${tipoMapa}`);
      });
    });

    // Configuración específica para mapa principal
    const mapaArea = document.getElementById("mapa-principal");
    if (mapaArea) {
      console.log("Área del mapa inicializada");
    }
  });
</script>
{% endblock %}
